{% extends "template.html" %}

{% block content %}
<h2>Profil uživatele {{ profile.name }}</h2>

<!-- Profilová fotka -->
{% if profile.profile_image %}
    <img src="{{ url_for('static', filename='uploads/' ~ profile.profile_image) }}" alt="Profilová fotka" style="width: 100px; height: 100px; border-radius: 50%; float: right;">
{% endif %}

<!-- Informace o uživateli -->
<ul>
    <li><strong>Věk:</strong> {{ profile.age }}</li>
    <li><strong>Zájmy:</strong>
        <ul>
            {% if interests %}
                {% for interest in interests %}
                    <li>{{ interest }}</li>
                {% endfor %}
            {% else %}
                <li>Žádné zájmy</li>
            {% endif %}
        </ul>
    </li>
    <li><strong>Body sluníček:</strong> {{ profile.sun_points }}</li>
</ul>

<!-- Odkazy pro úpravu a odhlášení, viditelné pouze pro aktuálně přihlášeného uživatele -->
{% if session.get("username") == profile.name %}
    <a href="{{ url_for('edit_profile') }}" class="btn btn-primary" style="margin-top: 20px;">Upravit profil</a>
    <form action="{{ url_for('logout') }}" method="post" style="margin-top: 10px;">
        <button type="submit" class="btn btn-secondary">Odhlásit se</button>
    </form>
{% endif %}

<!-- Probíhající výzvy -->
<h3>Probíhající výzvy</h3>
{% if ongoing_challenges %}
    <ul>
        {% for challenge in ongoing_challenges %}
            <li>
                <a href="{{ url_for('challenge_details', title=challenge.title) }}">{{ challenge.title }}</a> - končí {{ challenge.end_date }}
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Momentálně se neúčastníte žádných výzev.</p>
{% endif %}

<!-- Splněné výzvy -->
<h3>Splněné výzvy</h3>
{% if completed_challenges %}
    <ul>
        {% for challenge in completed_challenges %}
            <li>
                <a href="{{ url_for('challenge_details', title=challenge.title) }}">{{ challenge.title }}</a> - splněno<br>
                <strong>Výsledek:</strong> {{ challenge.result }}<br>
                <strong>Komentář:</strong> {{ challenge.comment }}
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Nemáte žádné splněné výzvy.</p>
{% endif %}

<!-- Odkaz na Admin stránku, pokud je přihlášen admin -->
{% if session.get("username") == "admin" and profile.name == "admin" %}
    <a href="{{ url_for('admin') }}" class="btn btn-primary" style="margin-top: 20px;">Přejít na Admin stránku</a>
{% endif %}

{% endblock %}


