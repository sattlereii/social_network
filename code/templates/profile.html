{% extends "template.html" %}

{% block content %}
    <h2>Profil uživatele {{ profile.get("name") }}</h2>

    <!-- Zobrazení aktuálních údajů -->
    <ul>
        <li>Věk: {{ profile.get("age") }}</li>
        <li>Záliby:
            <ul>
                {% if profile.get("hobbies") %}
                    {% for hobby in profile.get("hobbies") %}
                        <li>{{ hobby }}</li>
                    {% endfor %}
                {% else %}
                    <li>Žádné záliby</li>
                {% endif %}
            </ul>
        </li>
        <li>Body sluníček: {{ profile.get("sun_points") }}</li>
        <li>Body ohýnku: {{ profile.get("fire_points") }}</li>
    </ul>

    <!-- Tlačítko pro zobrazení formuláře pro úpravu -->
    <button onclick="document.getElementById('editForm').style.display='block'; this.style.display='none';">
        Upravit údaje
    </button>

    <!-- Formulář pro úpravu údajů, skrytý na začátku -->
    <div id="editForm" style="display: none;">
        <h3>Upravit profil</h3>
        <form action="{{ url_for('update_profile') }}" method="post">
            <label for="name">Jméno:</label>
            <input type="text" id="name" name="name" value="{{ profile.get('name') }}" required><br>

            <label for="password">Nové heslo:</label>
            <input type="password" id="password" name="password"><br>

            <label for="age">Věk:</label>
            <input type="number" id="age" name="age" value="{{ profile.get('age') }}" required><br>

            <label for="hobbies">Záliby (oddělené čárkami):</label>
            <input type="text" id="hobbies" name="hobbies" value="{{ profile.get('hobbies') | join(', ') }}"><br>

            <button type="submit">Uložit změny</button>
        </form>
    </div>

    <!-- Tlačítko pro odhlášení -->
    <form action="{{ url_for('logout') }}" method="post">
        <button type="submit">Odhlásit se</button>
    </form>
{% endblock %}


